---
import * as path from "path";
import * as fs from "fs";
import { dirname } from 'path';
import { fileURLToPath } from 'url';
import Layout from "../../../layouts/Layout.astro";
import RightSidebar from "../../../components/RightSidebar.svelte";
const __dirname = dirname(fileURLToPath(import.meta.url));

const { name, page } = Astro.params;

// Get the docs file
const file = path.join(__dirname, `../../../../public/docs/${name}.json`);
const content = fs.readFileSync(file, "utf-8")
const json = JSON.parse(content);
let map: {[key: string]: string} = {};

for (const { key, value } of json) {
	map[key] = value;
}
---

<Layout title="Documentation">
	<article set:html={map[page]} class="markdown-body border rounded-lg bg-white p-6 w-full"></article>
	<RightSidebar structure={map}></RightSidebar>
</Layout>